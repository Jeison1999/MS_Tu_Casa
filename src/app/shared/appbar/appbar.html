<header [ngClass]="['appbar', currentTheme]">
  <div class="appbar-glow"></div>
  
  <div class="appbar-container">
    <!-- Logo & Brand -->
    <div class="brand" (mouseenter)="logoHover = true" (mouseleave)="logoHover = false">
      <div class="logo-container">
        <div class="logo-ring" [class.hover]="logoHover"></div>
        <img [src]="logo1" alt="Morando en Sion" class="logo">
      </div>
      <div class="brand-text">
        <div class="brand-title">Morando en Sion</div>
        <div class="brand-subtitle">Iglesia Cristiana</div>
      </div>
    </div>
    
    <!-- Navigation -->
    <nav class="nav">
      <a
        routerLink="/"
        class="nav-item"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeAll()"
      >
        <span class="nav-label">Inicio</span>
        <div class="nav-indicator"></div>
      </a>
      
      <div class="nav-item dropdown" 
           (mouseleave)="startCloseDropdown()"
           (mouseenter)="cancelCloseDropdown()">
        <span class="nav-label" (click)="toggleDropdown('nosotros', $event)">Nosotros <i class="arrow">‚ùØ</i></span>
        <div class="nav-indicator"></div>
        
        <div class="dropdown-panel" 
             [class.show]="currentDropdown === 'nosotros'">
          <div class="dropdown-grid">
            <div class="dropdown-section">
              <div class="section-header">
                <span class="section-icon">‚õ™</span>
                <h3>Nuestra Iglesia</h3>
              </div>
              <a href="#" class="dropdown-link">
                <span>Qui√©nes somos</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Historia</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Misi√≥n y Visi√≥n</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Declaraci√≥n de Fe</span>
                <i class="link-arrow">‚Üí</i>
              </a>
            </div>
            
            <div class="dropdown-section">
              <div class="section-header">
                <span class="section-icon">üë•</span>
                <h3>Liderazgo</h3>
              </div>
              <a href="#" class="dropdown-link">
                <span>Pastores</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Equipo Pastoral</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Ancianos</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Di√°conos</span>
                <i class="link-arrow">‚Üí</i>
              </a>
            </div>
            
            <div class="dropdown-featured">
              <div class="featured-badge">Nuevo</div>
              <h3 class="featured-title">Bienvenidos a Casa</h3>
              <p class="featured-desc">Descubre una comunidad que te espera con los brazos abiertos.</p>
              <a href="#" class="featured-cta">
                <span>Conoce m√°s</span>
                <i>‚Üí</i>
              </a>
            </div>
          </div>
        </div>
      </div>
      
      <div class="nav-item dropdown" 
           (mouseleave)="startCloseDropdown()"
           (mouseenter)="cancelCloseDropdown()">
        <span class="nav-label" (click)="toggleDropdown('ministerios', $event)">Ministerios <i class="arrow">‚ùØ</i></span>
        <div class="nav-indicator"></div>
        
        <div class="dropdown-panel" 
             [class.show]="currentDropdown === 'ministerios'">
          <div class="dropdown-grid">
            <div class="dropdown-section">
              <div class="section-header">
                <span class="section-icon">üë∂</span>
                <h3>Por Edad</h3>
              </div>
              <a href="#" class="dropdown-link">
                <span>Kaynos Kids</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a
                routerLink="/ministerios/kaynosGeneracion"
                class="dropdown-link"
                (click)="closeAll()"
              >
                <span>Kaynos Generacion</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Escruadron de Caballeros</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span> Dunamis</span>
                <i class="link-arrow">‚Üí</i>
              </a>
            </div>
            
            <div class="dropdown-section">
              <div class="section-header">
                <span class="section-icon">‚ú®</span>
                <h3>Ministerios</h3>
              </div>
              <a href="#" class="dropdown-link">
                <span>Alabanza</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Intercesi√≥n</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Evangelismo</span>
                <i class="link-arrow">‚Üí</i>
              </a>
              <a href="#" class="dropdown-link">
                <span>Grupos Peque√±os</span>
                <i class="link-arrow">‚Üí</i>
              </a>
            </div>
            
            <div class="dropdown-featured">
              <div class="featured-badge">Descubre</div>
              <h3 class="featured-title">Tu Llamado</h3>
              <p class="featured-desc">Encuentra el ministerio donde puedes servir y crecer.</p>
              <a href="#" class="featured-cta">
                <span>Explorar</span>
                <i>‚Üí</i>
              </a>
            </div>
          </div>
        </div>
      </div>
      
      <a
        routerLink="/eventos"
        class="nav-item"
        routerLinkActive="active"
        (click)="closeAll()"
      >
        <span class="nav-label">Eventos</span>
        <div class="nav-indicator"></div>
      </a>
      
      <a
        routerLink="/contacto"
        class="nav-item"
        routerLinkActive="active"
        (click)="closeAll()"
      >
        <span class="nav-label">Contacto</span>
        <div class="nav-indicator"></div>
      </a>
    </nav>
  </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" [class.active]="mobileOpen">
  <div class="mobile-content">
    <a
      routerLink="/"
      class="mobile-link"
      routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }"
      (click)="closeAll()"
    >
      Inicio
    </a>
    <a href="#" class="mobile-link">Nosotros</a>
    <a href="#" class="mobile-link">Ministerios</a>
    <a
      routerLink="/eventos"
      class="mobile-link"
      routerLinkActive="active"
      (click)="closeAll()"
    >
      Eventos
    </a>
    <a
      routerLink="/contacto"
      class="mobile-link"
      routerLinkActive="active"
      (click)="closeAll()"
    >
      Contacto
    </a>
    <button class="mobile-cta">üíù Ofrendar</button>
  </div>
</div>

<div class="backdrop" [class.active]="currentDropdown !== null || mobileOpen" (click)="closeAll()"></div>
